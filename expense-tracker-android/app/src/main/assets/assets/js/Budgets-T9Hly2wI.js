import{j as e}from"./charts-BciV_co-.js";import{r as u}from"./vendor-C6QSnSy8.js";import{u as w}from"./dashboard-BxLSlvrI.js";import{m as d}from"./animation-1uu9_pmp.js";import{l as k,t as B,d as C}from"./icons-CfTck2df.js";import"./utils-isDzWD96.js";const F=()=>{const{budgets:o,upsertBudget:m,transactions:y}=w(),[p,l]=u.useState(!1),[x,c]=u.useState(null),[r,i]=u.useState({category:"",limit:""}),j=["Food","Transport","Bills","Shopping","Entertainment","Health","Education","Travel","Utilities","Other"],f=t=>{t.preventDefault(),r.category&&r.limit&&(m(r.category,parseFloat(r.limit)),i({category:"",limit:""}),l(!1),c(null))},v=t=>{c(t),i({category:t.category,limit:t.limit}),l(!0)},N=t=>{if(window.confirm(`Are you sure you want to delete the budget for ${t}?`)){const s=o.filter(a=>a.category!==t);o.forEach(a=>{m(a.category,a.category===t?0:a.limit)}),s.forEach(a=>{m(a.category,a.limit)})}},b=t=>y.filter(s=>s.type==="expense"&&s.category===t).reduce((s,a)=>s+a.amount,0),g=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t);return e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"section-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"section-title",children:"Budgets"}),e.jsx("p",{className:"section-subtitle",children:"Set spending limits for different categories and track your progress"})]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>l(!0),children:[e.jsx(k,{size:20}),"Add Budget"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map((t,s)=>{const a=b(t.category),h=Math.min(a/t.limit*100,100),n=a>t.limit;return e.jsx(d.div,{className:"card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.1},whileHover:{y:-5},children:e.jsxs("div",{className:"card-content",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-100",children:t.category}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[g(a)," of ",g(t.limit)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>v(t),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:e.jsx(B,{size:16,className:"text-gray-500 dark:text-gray-400"})}),e.jsx("button",{onClick:()=>N(t.category),className:"p-2 rounded-lg hover:bg-error-100 dark:hover:bg-error-900/20 transition-colors",children:e.jsx(C,{size:16,className:"text-error-500"})})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Progress"}),e.jsxs("span",{className:`font-medium ${n?"text-error-500":"text-gray-800 dark:text-gray-200"}`,children:[h.toFixed(0),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:e.jsx(d.div,{className:`h-2.5 rounded-full ${n?"bg-error-500":"bg-primary-500"}`,initial:{width:0},animate:{width:`${h}%`},transition:{duration:1,delay:s*.1}})})]}),e.jsx("div",{className:"mt-3 text-sm",children:e.jsxs("span",{className:n?"text-error-500":"text-gray-600 dark:text-gray-400",children:[n?"Over budget by ":"Remaining: ",g(n?a-t.limit:t.limit-a)]})})]})},t.category)})}),p&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs(d.div,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-md card",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h2",{className:"card-title",children:x?"Edit Budget":"Add New Budget"}),e.jsx("button",{onClick:()=>{l(!1),c(null),i({category:"",limit:""})},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),e.jsxs("form",{onSubmit:f,className:"card-content",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Category"}),e.jsxs("select",{value:r.category,onChange:t=>i({...r,category:t.target.value}),className:"input w-full",required:!0,children:[e.jsx("option",{value:"",children:"Select a category"}),j.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Budget Limit"}),e.jsx("input",{type:"number",step:"0.01",value:r.limit,onChange:t=>i({...r,limit:t.target.value}),className:"input w-full",placeholder:"0.00",required:!0})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{l(!1),c(null),i({category:"",limit:""})},className:"btn btn-secondary flex-1",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn btn-primary flex-1",children:[x?"Update":"Add"," Budget"]})]})]})]})})]})};export{F as default};
