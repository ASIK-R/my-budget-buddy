import{j as e}from"./charts-BciV_co-.js";import{r as d}from"./vendor-C6QSnSy8.js";import{u as M}from"./dashboard-BxLSlvrI.js";import{a as F,m as h}from"./animation-1uu9_pmp.js";import{c as q,l as R,E as P,m as U,W as N,B as H,h as O,S as $,n as G,o as W}from"./icons-CfTck2df.js";import"./utils-isDzWD96.js";const Z=()=>{const{wallets:s,addWallet:C,transferBetweenWallets:B}=M(),[S,o]=d.useState(!1),[T,g]=d.useState(!1),[y,A]=d.useState(!1),[l,u]=d.useState({name:"",type:"Bank",initialBalance:""}),[r,c]=d.useState({fromWallet:"",toWallet:"",amount:"",note:""}),[w,n]=d.useState({}),[b,m]=d.useState(!1),p=s.map(()=>F(0,{stiffness:300,damping:30}));d.useEffect(()=>{s.forEach((a,t)=>{p[t].set(a.balance)})},[s,p]);const k=[{id:"Bank",name:"Bank Account",icon:H},{id:"Cash",name:"Cash",icon:O},{id:"Mobile",name:"Mobile Wallet",icon:$},{id:"Card",name:"Credit/Debit Card",icon:G}],z=async a=>{if(a.preventDefault(),!l.name){n({general:"Wallet name is required"});return}if(parseFloat(l.initialBalance)<0){n({general:"Initial balance cannot be negative"});return}try{await C({name:l.name,type:l.type,initialBalance:parseFloat(l.initialBalance)||0}),u({name:"",type:"Bank",initialBalance:""}),o(!1),n({})}catch(t){n({general:t instanceof Error?t.message:String(t)})}},I=async a=>{if(a.preventDefault(),!r.fromWallet||!r.toWallet){n({general:"Please select both source and destination wallets"});return}if(r.fromWallet===r.toWallet){n({general:"Source and destination wallets must be different"});return}const t=parseFloat(r.amount);if(isNaN(t)||t<=0){n({general:"Please enter a valid transfer amount"});return}m(!0);try{const i=await B(r.fromWallet,r.toWallet,t,r.note),f=s.findIndex(v=>v.id===r.fromWallet),j=s.findIndex(v=>v.id===r.toWallet);f!==-1&&p[f].set(s[f].balance-t),j!==-1&&p[j].set(s[j].balance+t),c({fromWallet:"",toWallet:"",amount:"",note:""}),g(!1),n({}),setTimeout(()=>{m(!1)},1500)}catch(i){m(!1),n({general:i instanceof Error?i.message:String(i)})}},L=a=>{const t=k.find(i=>i.id===a);return t?t.icon:N},D=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a),x=a=>y?"••••••":D(a),E=s.reduce((a,t)=>a+t.balance,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Wallets"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage your wallets and transfer money between them."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{className:"btn btn-primary flex items-center gap-2",onClick:()=>g(!0),children:[e.jsx(q,{size:20}),"Transfer Money"]}),e.jsxs("button",{className:"btn btn-secondary flex items-center gap-2",onClick:()=>o(!0),children:[e.jsx(R,{size:20}),"Add Wallet"]})]})]}),e.jsxs("div",{className:"card bg-gradient-to-r from-primary-600 to-primary-700 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-primary-100",children:"Total Balance"}),e.jsx("button",{onClick:()=>A(!y),className:"text-primary-200 hover:text-white",children:y?e.jsx(P,{size:16}):e.jsx(U,{size:16})})]}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:x(E)})]}),e.jsx("div",{className:"p-4 bg-white/20 rounded-xl",children:e.jsx(N,{size:32})})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-primary-500/30",children:e.jsxs("p",{className:"text-xs text-primary-100",children:[s.length," ",s.length===1?"wallet":"wallets"]})})]}),s.length===0?e.jsxs("div",{className:"card text-center py-12",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mb-4",children:e.jsx(N,{className:"text-gray-400",size:32})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No wallets yet"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Add your first wallet to start tracking your finances."}),e.jsx("button",{className:"btn-primary mx-auto",onClick:()=>o(!0),children:"Add Wallet"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map((a,t)=>{const i=L(a.type);return e.jsxs(h.div,{className:"card bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900/50 shadow-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:t*.1},whileHover:{y:-5},children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-xl bg-primary-100 dark:bg-primary-900/30",children:e.jsx(i,{className:"text-primary-600 dark:text-primary-400",size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:a.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a.type})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:x(a.balance)}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Initial: ",x(a.initialBalance)]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Last updated: ",new Date(a.updatedAt).toLocaleDateString()]})})]},a.id)})}),S&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs(h.div,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-md",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Add New Wallet"}),e.jsx("button",{onClick:()=>o(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),e.jsxs("form",{onSubmit:z,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Wallet Name"}),e.jsx("input",{type:"text",value:l.name,onChange:a=>u({...l,name:a.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"e.g., Primary Bank Account",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Wallet Type"}),e.jsx("select",{value:l.type,onChange:a=>u({...l,type:a.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0,children:k.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Initial Balance"}),e.jsx("input",{type:"number",step:"0.01",value:l.initialBalance,onChange:a=>u({...l,initialBalance:a.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"0.00"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"flex-1 py-3 px-4 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-semibold rounded-xl transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 py-3 px-4 bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800 text-white font-semibold rounded-xl shadow-md hover:shadow-lg transition-all",children:"Add Wallet"})]})]})]})}),T&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs(h.div,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-md",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(W,{size:20}),"Transfer Money"]}),e.jsx("button",{onClick:()=>{g(!1),m(!1)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),e.jsxs("form",{onSubmit:I,className:"p-6 space-y-4",children:[w.general&&e.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-lg text-sm",children:w.general}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"From Wallet"}),e.jsxs("select",{value:r.fromWallet,onChange:a=>c({...r,fromWallet:a.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select source wallet"}),s.map(a=>e.jsxs("option",{value:a.id,children:[a.name," (",x(a.balance),")"]},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"To Wallet"}),e.jsxs("select",{value:r.toWallet,onChange:a=>c({...r,toWallet:a.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select destination wallet"}),s.map(a=>e.jsxs("option",{value:a.id,children:[a.name," (",x(a.balance),")"]},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Amount"}),e.jsx("input",{type:"number",step:"0.01",value:r.amount,onChange:a=>c({...r,amount:a.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"0.00",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Note (Optional)"}),e.jsx("input",{type:"text",value:r.note,onChange:a=>c({...r,note:a.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"e.g., Monthly transfer"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{g(!1),m(!1)},className:"flex-1 py-3 px-4 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-semibold rounded-xl transition-colors",disabled:b,children:"Cancel"}),e.jsx("button",{type:"submit",className:`flex-1 py-3 px-4 font-semibold rounded-xl shadow-md hover:shadow-lg transition-all flex items-center justify-center gap-2 ${b?"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white":"bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800 text-white"}`,disabled:b,children:b?e.jsxs(e.Fragment,{children:[e.jsx(h.div,{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),e.jsx("span",{children:"Transferring..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{size:20}),e.jsx("span",{children:"Transfer Money"})]})})]})]})]})})]})};export{Z as default};
