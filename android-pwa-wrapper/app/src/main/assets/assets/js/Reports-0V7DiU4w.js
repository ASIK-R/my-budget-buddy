import{j as e,R as j,g as T,h as C,X as F,Y as D,T as u,k as f,l as b,m as L,n as W,o as P,q as U,r as S}from"./charts-BciV_co-.js";import{r as v}from"./vendor-C6QSnSy8.js";import{u as X}from"./dashboard-BxLSlvrI.js";import{d as q,a as G,b as H,c as J}from"./report-Cp_-y-td.js";import{a as Q,f as A,b as Z,e as _,p as ee}from"./utils-isDzWD96.js";import{a9 as ae,F as k,s as R,p as B,c as z,C as te}from"./icons-CfTck2df.js";import{m as o}from"./animation-1uu9_pmp.js";const xe=()=>{const{transactions:n,budgets:g,wallets:$}=X(),[x,I]=v.useState("monthly"),[K,O]=v.useState("thisYear"),{monthlyData:E,categoryData:N,walletData:se}=v.useMemo(()=>{const a=[],r=[];for(let t=11;t>=0;t--){const i=Q(new Date,t),p=A(i,"yyyy-MM");r.push(p)}r.forEach(t=>{const i=Z(new Date(t)),p=_(new Date(t)),M=n.filter(l=>{const c=ee(l.date);return c>=i&&c<=p}),V=M.filter(l=>l.type==="income").reduce((l,c)=>l+c.amount,0),Y=M.filter(l=>l.type==="expense").reduce((l,c)=>l+c.amount,0);a.push({month:A(new Date(t),"MMM yyyy"),income:parseFloat(V.toFixed(2)),expenses:parseFloat(Y.toFixed(2))})});const d={};n.filter(t=>t.type==="expense").forEach(t=>{d[t.category]||(d[t.category]=0),d[t.category]+=t.amount});const w=Object.keys(d).map(t=>({name:t,value:parseFloat(d[t].toFixed(2))}));return{monthlyData:a,categoryData:w,walletData:[]}},[n]),m=v.useMemo(()=>{const a=n.filter(s=>s.type==="income").reduce((s,t)=>s+t.amount,0),r=n.filter(s=>s.type==="expense").reduce((s,t)=>s+t.amount,0),d=a-r,w=g.map(s=>{const t=n.filter(i=>i.type==="expense"&&i.category===s.category).reduce((i,p)=>i+p.amount,0);return{category:s.category,budget:s.limit,actual:t,remaining:Math.max(0,s.limit-t),overspent:t>s.limit?t-s.limit:0}});return{totalIncome:parseFloat(a.toFixed(2)),totalExpenses:parseFloat(r.toFixed(2)),netSavings:parseFloat(d.toFixed(2)),budgetVsActual:w}},[n,g]),h=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82ca9d","#ffc658","#ff7300"],y=a=>{switch(a){case"csv-transactions":J("all",n);break;case"csv-budgets":H(g);break;case"csv-wallets":G($);break;case"csv-comprehensive":q(n,g,$);break;default:alert(`Exporting report as ${a.toUpperCase()}...`)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Reports"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Export data and view detailed financial summaries."})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("select",{value:K,onChange:a=>O(a.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700",children:[e.jsx("option",{value:"thisMonth",children:"This Month"}),e.jsx("option",{value:"lastMonth",children:"Last Month"}),e.jsx("option",{value:"thisYear",children:"This Year"}),e.jsx("option",{value:"lastYear",children:"Last Year"}),e.jsx("option",{value:"allTime",children:"All Time"})]}),e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{className:"btn-primary flex items-center gap-2",children:[e.jsx(ae,{size:20}),"Export"]}),e.jsxs("div",{className:"absolute right-0 mt-1 w-56 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-2 hidden group-hover:block z-10",children:[e.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",onClick:()=>y("csv-transactions"),children:[e.jsx(k,{size:16}),"Transactions CSV"]}),e.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",onClick:()=>y("csv-budgets"),children:[e.jsx(k,{size:16}),"Budgets CSV"]}),e.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",onClick:()=>y("csv-wallets"),children:[e.jsx(k,{size:16}),"Wallets CSV"]}),e.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",onClick:()=>y("csv-comprehensive"),children:[e.jsx(k,{size:16}),"Comprehensive CSV"]})]})]})]})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[{id:"monthly",label:"Monthly Summary",icon:R},{id:"category",label:"Category Breakdown",icon:B},{id:"trend",label:"Trend Analysis",icon:z},{id:"budget",label:"Budget vs Actual",icon:te}].map(a=>{const r=a.icon;return e.jsxs("button",{onClick:()=>I(a.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl whitespace-nowrap transition-all ${x===a.id?"bg-primary-100 dark:bg-primary-900/50 text-primary-700 dark:text-primary-300":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[e.jsx(r,{size:18}),a.label]},a.id)})}),x==="monthly"&&e.jsxs(o.div,{className:"card p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Monthly Income vs Expenses"}),e.jsx(j,{width:"100%",height:400,children:e.jsxs(T,{data:E,children:[e.jsx(C,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"month"}),e.jsx(D,{}),e.jsx(u,{formatter:a=>[`$${a}`,"Amount"]}),e.jsx(f,{}),e.jsx(b,{dataKey:"income",fill:"#10B981",name:"Income"}),e.jsx(b,{dataKey:"expenses",fill:"#EF4444",name:"Expenses"})]})})]}),x==="category"&&e.jsxs(o.div,{className:"card p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Expense by Category"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsx("div",{className:"flex-1",children:e.jsx(j,{width:"100%",height:300,children:e.jsxs(L,{children:[e.jsx(W,{data:N,cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",dataKey:"value",label:!0,children:N.map((a,r)=>e.jsx(P,{fill:h[r%h.length]},`cell-${r}`))}),e.jsx(u,{formatter:a=>[`$${a}`,"Amount"]}),e.jsx(f,{})]})})}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"space-y-4",children:N.map((a,r)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:h[r%h.length]}}),e.jsx("span",{className:"font-medium",children:a.name})]}),e.jsxs("span",{className:"font-semibold",children:["$",a.value]})]},a.name))})})]})]}),x==="trend"&&e.jsxs(o.div,{className:"card p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Income & Expense Trends"}),e.jsx(j,{width:"100%",height:400,children:e.jsxs(U,{data:E,children:[e.jsx(C,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"month"}),e.jsx(D,{}),e.jsx(u,{formatter:a=>[`$${a}`,"Amount"]}),e.jsx(f,{}),e.jsx(S,{type:"monotone",dataKey:"income",stroke:"#10B981",strokeWidth:2,name:"Income"}),e.jsx(S,{type:"monotone",dataKey:"expenses",stroke:"#EF4444",strokeWidth:2,name:"Expenses"})]})})]}),x==="budget"&&e.jsxs(o.div,{className:"card p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Budget vs Actual Spending"}),e.jsx(j,{width:"100%",height:400,children:e.jsxs(T,{data:m.budgetVsActual,children:[e.jsx(C,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"category"}),e.jsx(D,{}),e.jsx(u,{formatter:a=>[`$${a}`,"Amount"]}),e.jsx(f,{}),e.jsx(b,{dataKey:"budget",fill:"#3B82F6",name:"Budget"}),e.jsx(b,{dataKey:"actual",fill:"#EF4444",name:"Actual"})]})}),e.jsx("div",{className:"mt-8 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Budget"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actual"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Remaining"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:m.budgetVsActual.map((a,r)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:a.category}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:["$",a.budget]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:["$",a.actual.toFixed(2)]}),e.jsxs("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-medium ${a.remaining>0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:["$",a.remaining.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.overspent>0?e.jsxs("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",children:["Overspent by $",a.overspent.toFixed(2)]}):e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",children:"On track"})})]},r))})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(o.div,{className:"card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-green-100 dark:bg-green-900/30",children:e.jsx(R,{className:"text-green-600 dark:text-green-400",size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Total Income"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",m.totalIncome]})]})]})}),e.jsx(o.div,{className:"card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-red-100 dark:bg-red-900/30",children:e.jsx(B,{className:"text-red-600 dark:text-red-400",size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Total Expenses"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",m.totalExpenses]})]})]})}),e.jsx(o.div,{className:"card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-blue-100 dark:bg-blue-900/30",children:e.jsx(z,{className:"text-blue-600 dark:text-blue-400",size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Net Savings"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",m.netSavings]})]})]})})]})]})};export{xe as default};
