import { useState, useMemo, memo } from 'react';
import { 
  TrendingUp, 
  Bell, 
  HelpCircle, 
  Settings as SettingsIcon,
  User,
  BarChart3,
  Wallet,
  Target,
  Award,
  Share2,
  Shield,
  FileText,
  Download,
  Heart,
  PieChart,
  Bot,
  Database,
  Repeat,
  Cloud,
  Gift,
  Users,
  Lock,
  Eye,
  Upload,
  Palette,
  Home,
  PiggyBank,
  Phone,
  MessageSquare,
  Info,
  FolderOpen,
  Grid
} from 'lucide-react';
import { useNavigate } from 'react-router-dom';
import { getIconClass } from '../utils/iconUtils';

const More = () => {
  const navigate = useNavigate();

  // Comprehensive list of all available pages organized by category
  const allFeatures = useMemo(() => [
    {
      id: 'core',
      title: 'Core Features',
      description: 'Essential financial management tools',
      icon: Home,
      items: [
        { id: 'dashboard', icon: PieChart, label: 'Dashboard', path: '/' },
        { id: 'wallets', icon: Wallet, label: 'Wallets', path: '/wallet' },
        { id: 'transactions', icon: BarChart3, label: 'Transactions', path: '/analysis' },
        { id: 'financial-planning', icon: TrendingUp, label: 'Financial Planning', path: '/planning' },
        { id: 'ai-insights', icon: Bot, label: 'AI Insights', path: '/ai' },
      ]
    },
    {
      id: 'management',
      title: 'Management Tools',
      description: 'Advanced financial control systems',
      icon: Database,
      items: [
        { id: 'budgets', icon: PiggyBank, label: 'Budgets', path: '/budgets' },
        { id: 'goals', icon: Target, label: 'Financial Goals', path: '/goals' },
        { id: 'recurring', icon: Repeat, label: 'Recurring Transactions', path: '/recurring' },
        { id: 'investments', icon: TrendingUp, label: 'Investments', path: '/' },
        { id: 'reports', icon: FileText, label: 'Reports', path: '/reports' },
      ]
    },
    {
      id: 'account',
      title: 'Account & Profile',
      description: 'Personal account settings and security',
      icon: User,
      items: [
        { id: 'profile', icon: User, label: 'Profile', path: '/profile' },
        { id: 'notifications', icon: Bell, label: 'Notifications', path: '/notifications' },
        { id: 'settings', icon: SettingsIcon, label: 'Settings', path: '/settings' },
        { id: 'security', icon: Lock, label: 'Security', path: '/settings#security' },
        { id: 'privacy', icon: Eye, label: 'Privacy Policy', path: '/settings#privacy' },
        { id: 'backup-restore', icon: Database, label: 'Backup & Restore', path: '/backup-restore' },
      ]
    },
    {
      id: 'social',
      title: 'Social & Sharing',
      description: 'Connect and share with others',
      icon: Users,
      items: [
        { id: 'achievements', icon: Award, label: 'Achievements', path: '/gamification' },
        { id: 'shared-accounts', icon: Share2, label: 'Shared Accounts', path: '/shared-accounts' },
        { id: 'referrals', icon: Gift, label: 'Referral Program', path: '#' },
      ]
    },
    {
      id: 'support',
      title: 'Support & Help',
      description: 'Get assistance and support',
      icon: HelpCircle,
      items: [
        { id: 'support', icon: HelpCircle, label: 'Support Center', path: '/support' },
        { id: 'faq', icon: HelpCircle, label: 'FAQ', path: '/support#faq' },
        { id: 'contact', icon: Phone, label: 'Contact Us', path: '/support#contact' },
        { id: 'feedback', icon: MessageSquare, label: 'Feedback', path: '/support#feedback' },
      ]
    },
    {
      id: 'utilities',
      title: 'Utilities & Extras',
      description: 'Additional tools and utilities',
      icon: SettingsIcon,
      items: [
        { id: 'integrations', icon: Share2, label: 'Integrations', path: '/integrations' },
        { id: 'backup', icon: Cloud, label: 'Backup & Sync', path: '/backup-restore' },
        { id: 'export', icon: Download, label: 'Export Data', path: '/backup-restore' },
        { id: 'import', icon: Upload, label: 'Import Data', path: '/backup-restore' },
        { id: 'themes', icon: Palette, label: 'Themes', path: '/settings#themes' },
      ]
    },
    {
      id: 'organization',
      title: 'Organization',
      description: 'Categorize and organize your finances',
      icon: FolderOpen,
      items: [
        { id: 'categories', icon: Grid, label: 'All Categories', path: '/categories' },
      ]
    }
  ], []);

  const handleNavigation = (path) => {
    if (path && path !== '#') {
      navigate(path);
    }
  };

  return (
    <div className="p-responsive w-full max-w-full overflow-x-hidden bg-gray-50 dark:bg-gray-900">
      {/* Mobile-specific spacing adjustments */}
      <div className="sm:hidden mt-16"></div>
        
        {/* Modern Header with Gradient Background */}
        <div className="rounded-xl sm:rounded-2xl more-gradient-header p-3 sm:p-4 md:p-5 backdrop-blur-xl relative overflow-hidden shadow-lg">
          {/* Decorative Elements */}
          <div className="absolute top-0 right-0 w-16 h-16 sm:w-24 sm:h-24 more-decorative-element rounded-full -translate-y-8 translate-x-8"></div>
          <div className="absolute bottom-0 left-0 w-12 h-12 sm:w-16 sm:h-16 more-decorative-element rounded-full translate-y-6 -translate-x-6"></div>
          
          <div className="relative z-10">
            <div className="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-3">
              <div>
                <h1 className="text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white mb-1">All Features</h1>
                <p className="text-xs sm:text-sm text-gray-600 dark:text-gray-300">Access all financial tools and settings</p>
              </div>
            </div>
          </div>
        </div>

        {/* Info Note */}
        <div className="rounded-lg sm:rounded-xl more-info-note p-2 sm:p-3 backdrop-blur-xl shadow-md">
          <div className="flex items-start gap-2">
            <Info size={14} className="text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0 sm:w-4 sm:h-4" />
            <p className="text-[0.65rem] sm:text-xs text-blue-800 dark:text-blue-200">
              <span className="font-semibold">Note:</span> Some features like Investments are accessed through slider navigation on desktop.
            </p>
          </div>
        </div>

        {/* All Features Grid */}
        <div className="space-y-3 sm:space-y-4 md:space-y-5 pb-16 sm:pb-20">
          {allFeatures.map((category) => {
            const CategoryIcon = category.icon;
            return (
              <div key={category.id} className="rounded-xl sm:rounded-2xl more-category-card backdrop-blur-xl shadow-md sm:shadow-lg overflow-hidden relative">
                {/* Liquid glass effect elements */}
                <div className="absolute top-0 right-0 w-12 h-12 sm:w-16 sm:h-16 more-decorative-element rounded-full -translate-y-6 sm:-translate-y-8 translate-x-6 sm:translate-x-8 blur-lg"></div>
                <div className="absolute bottom-0 left-0 w-8 h-8 sm:w-12 sm:h-12 more-decorative-element rounded-full translate-y-4 sm:translate-y-6 -translate-x-4 sm:-translate-x-6 blur-lg"></div>
                
                <div className="p-3 sm:p-4 md:p-5 relative z-10">
                  <div className="flex items-center gap-2 sm:gap-3 mb-2 sm:mb-3">
                    <div className="p-1.5 sm:p-2 rounded-md sm:rounded-lg more-category-icon-bg backdrop-blur-xl more-category-border shadow-sm">
                      <CategoryIcon size={16} className="text-[#076653] sm:w-5 sm:h-5" />
                    </div>
                    <div>
                      <h2 className="text-base sm:text-lg md:text-xl font-bold text-gray-900 dark:text-white">{category.title}</h2>
                      <p className="text-[0.65rem] sm:text-xs text-gray-600 dark:text-gray-400 mt-0.5">{category.description}</p>
                    </div>
                  </div>
                  
                  <div className="grid grid-cols-4 gap-1.5 sm:gap-3 mt-2 sm:mt-3">
                    {category.items.map((item) => {
                      const ItemIcon = item.icon;
                      return (
                        <button
                          key={item.id}
                          onClick={() => handleNavigation(item.path)}
                          className="flex flex-col items-center justify-center p-1.5 sm:p-2 md:p-3 rounded-md sm:rounded-lg md:rounded-xl more-item-button backdrop-blur-xl transition-all duration-300 group shadow-sm hover:shadow md:hover:shadow-md hover:-translate-y-0.5 relative overflow-hidden min-h-[60px] sm:min-h-[80px]"
                        >
                          {/* Inner glow effect */}
                          <div className="absolute inset-0 more-item-hover-glow rounded-md sm:rounded-lg md:rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                          
                          <div className="w-6 h-6 sm:w-8 sm:h-8 rounded-md more-item-icon-bg flex items-center justify-center text-[#076653] mb-1 group-hover:scale-110 transition-all duration-300 shadow-sm more-item-border backdrop-blur-lg relative z-10">
                            <ItemIcon size={12} className="sm:w-4 sm:h-4" />
                          </div>
                          <span className="text-[0.55rem] sm:text-[0.65rem] font-semibold text-center text-gray-800 dark:text-gray-200 group-hover:text-[#076653] dark:group-hover:text-[#076653] px-0.5 transition-colors duration-300 relative z-10 leading-tight">
                            {item.label}
                          </span>
                        </button>
                      );
                    })}
                  </div>
                </div>
              </div>
            );
          })}
        </div>
      </div>
    </div>
  );
};

export default memo(More);